<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SafeGuard â€“ Tools</title>
  <link rel="stylesheet" href="assets/css/styles.css"/>
  <script defer src="assets/js/app.js"></script>
</head>
<body>
  <div class="app">

    <aside class="sidebar">
      <div class="brand">
        <div class="logo">ğŸ›¡ï¸</div>
        <div>
          <div class="brand-title">SafeGuard</div>
          <div class="brand-sub">Scam Protection</div>
        </div>
      </div>

      <div class="nav">
        <a data-nav href="index.html">ğŸ  Dashboard</a>
        <a data-nav href="scan.html">ğŸ§¾ Scan History</a>
        <a data-nav href="tools.html">ğŸ§© Extension Demo</a>

        <div class="nav-section">Safety Tools</div>
        <a data-nav href="tools.html">ğŸ”— Link & QR Check</a>
        <a data-nav href="tools.html#number">ğŸ“ Number Lookup</a>
        <a data-nav href="tools.html#toolkit">ğŸ§° Response Toolkit</a>
        <a data-nav href="settings.html">ğŸ§¯ Safety Recovery</a>

        <div class="nav-section">Family & Support</div>
        <a data-nav href="family.html">ğŸ‘¥ Trusted Contacts</a>
        <a data-nav href="family.html#escort">ğŸ§‘â€ğŸ¤â€ğŸ§‘ Family Escort</a>
        <a data-nav href="family.html#emergency">ğŸš¨ Emergency Support</a>

        <div class="nav-section">Learn & Practice</div>
        <a data-nav href="learn.html">ğŸ“š Education Hub</a>
      </div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div>
          <div class="h1">Safety Tools</div>
          <div class="small">Link/QR checks, scam number lookup, response toolkit.</div>
        </div>
        <div class="top-actions">
          <button class="iconbtn" onclick="location.href='scan.html'" title="Scan">ğŸ§¾</button>
          <button class="iconbtn" onclick="location.href='settings.html'" title="Settings">âš™ï¸</button>
          <div class="userchip">
            <div class="avatar">M</div>
            <div>
              <div style="font-weight:800;line-height:1">Margaret Smith</div>
              <div class="small">Senior User</div>
            </div>
          </div>
        </div>
      </div>

      <div class="grid cards2">
        <div class="card">
          <div class="h2">Link & QR Check</div>
          <div class="small">Paste a URL (for QR, paste the decoded URL).</div>
          <div class="hr"></div>
          <input id="url" class="input" placeholder="https://example.com"/>
          <div class="btnrow">
            <button class="btn primary" id="check">Check</button>
            <button class="btn gray" id="clear">Clear</button>
          </div>

          <div id="risk" class="riskbox good" style="display:none;">
            <div>
              <div style="font-weight:900" id="title">Low Risk</div>
              <div class="small" id="zh"></div>
              <div class="small" id="note"></div>
            </div>
            <div style="text-align:right">
              <div class="meter"><div id="bar" style="width:0%"></div></div>
              <div class="small"><span id="score">0</span>/100</div>
            </div>
          </div>

          <ul class="note" id="reasons" style="margin:10px 0 0 0; padding-left:18px;"></ul>
        </div>

        <div class="card" id="number">
          <div class="h2">Number Lookup</div>
          <div class="small">Prototype: compares against a local â€œreported listâ€.</div>
          <div class="hr"></div>
          <input id="phone" class="input" placeholder="+1 206 555 0101"/>
          <div class="btnrow">
            <button class="btn primary" id="lookup">Lookup</button>
            <button class="btn gray" id="pclear">Clear</button>
          </div>
          <div id="out" class="note" style="margin-top:10px;"></div>
        </div>
      </div>

      <div class="card" id="toolkit" style="margin-top:14px;">
        <div class="inbox-header">
          <div>
            <div class="h2">Response Toolkit</div>
            <div class="small">What to do when risk is high (quick checklist).</div>
          </div>
          <a class="link" href="family.html#emergency">Emergency Support â†’</a>
        </div>

        <div class="list">
          <div class="item">
            <div>
              <strong>1) Stop immediately</strong>
              <div class="small">Do not transfer money, do not share codes, do not install remote apps.</div>
            </div>
            <span class="tag bad">Must</span>
          </div>
          <div class="item">
            <div>
              <strong>2) Verify via official channels</strong>
              <div class="small">Use official phone numbers you find yourself (not the scammerâ€™s).</div>
            </div>
            <span class="tag warn">Verify</span>
          </div>
          <div class="item">
            <div>
              <strong>3) Ask a trusted contact</strong>
              <div class="small">Use One-Tap Family Ask to get help before acting.</div>
            </div>
            <span class="tag good">Support</span>
          </div>
        </div>
      </div>

      <script>
        const url = document.getElementById("url");
        const checkBtn = document.getElementById("check");
        const clearBtn = document.getElementById("clear");

        const risk = document.getElementById("risk");
        const title = document.getElementById("title");
        const zh = document.getElementById("zh");
        const note = document.getElementById("note");
        const bar = document.getElementById("bar");
        const scoreEl = document.getElementById("score");
        const reasons = document.getElementById("reasons");

        checkBtn.addEventListener("click", ()=>{
          const r = checkUrl(url.value);
          const meta = riskMeta(r.level === "high" ? "high" : r.level === "medium" ? "medium" : "low");
          risk.style.display = "flex";
          risk.className = `riskbox ${meta.cls}`;
          title.textContent = meta.en;
          zh.textContent = meta.zh;
          note.textContent = "This is a prototype heuristic check.";
          bar.style.width = `${r.score}%`;
          scoreEl.textContent = r.score;
          reasons.innerHTML = (r.reasons || []).map(x=>`<li>${x}</li>`).join("");
        });

        clearBtn.addEventListener("click", ()=>{
          url.value = "";
          risk.style.display = "none";
          reasons.innerHTML = "";
        });

        const phone = document.getElementById("phone");
        const lookupBtn = document.getElementById("lookup");
        const pclear = document.getElementById("pclear");
        const out = document.getElementById("out");
        const REPORTED = ["+1 206 555 0101","206-555-0102","888-888-8888"];

        lookupBtn.addEventListener("click", ()=>{
          const p = phone.value.trim();
          if(!p) return alert("Enter a number.");
          const hit = REPORTED.some(x => x.replace(/\D/g,"") === p.replace(/\D/g,""));
          out.innerHTML = hit
            ? `<div class="riskbox bad"><div><div style="font-weight:900">Potential scam</div><div class="small">Found in local reported list (demo).</div></div><div class="tag bad">High Risk</div></div>`
            : `<div class="riskbox good"><div><div style="font-weight:900">No match found</div><div class="small">Still verify if money/codes are requested.</div></div><div class="tag good">Safe</div></div>`;
        });

        pclear.addEventListener("click", ()=>{
          phone.value = "";
          out.innerHTML = "";
        });
      </script>
    </main>
  </div>
</body>
</html>